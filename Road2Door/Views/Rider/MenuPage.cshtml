


@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@{
    List<Item> Items = ViewBag.items as List<Item>;
    List<MenuDetail> menuItems = ViewBag.menuItems as List<MenuDetail>;
  
}

<link href="/css/rider/inventory.css" rel="stylesheet" />
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>




@*

<table>
    <thead>
        <tr>
            <th>Item ID</th>
            <th>Item Name</th>
            <th>Item Description</th>
            <th>Item Quantity</th>
            <th>Item Price</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>

        @if (Items != null)
        {
            @foreach (var item in Items)
            {
                <tr>
                    <td>@item.ItemId</td>
                    <td>@item.Name</td>
                    <td>@item.Description</td>
                    <td>@item.Quantity</td>
                    <td>@item.Price</td>


                    <td><button class="edit-btn" data-item-id="@item.ItemId">Add to Menu</button></td>


                </tr>
            }
        }



    </tbody>
</table>*@

<body>
<div class="container-xl">
	<div class="table-responsive">
		<div class="table-wrapper">
			<div class="table-title">
				<div class="row">
					<div class="col-sm-6">
						<h2>Inventory</h2>
					</div>
					@*<div class="col-sm-6">
							<a href="#" class="btn btn-success" onclick="openCreateModal()">
								<i class="material-icons">&#xE147;</i> <span>Add New Item</span>
							</a>						
					</div>*@
						
				</div>
			</div>
			<table class="table table-striped table-hover">
				<thead>
					<tr>
							<th>ID</th>
							<th>Item Name</th>
							<th>Item Description</th>
							<th>Quantity</th>
							<th>Price</th>
							<th>Actions</th>
					</tr>
				</thead>
					<tbody>
                        @if (Items != null)
                        {
                            @foreach (var item in Items)
                            {
								<tr>
									<td>@item.ItemId</td>
									<td>@item.Name</td>
									<td>@item.Description</td>
									<td>@item.Quantity</td>
									<td>@item.Price</td>
									<td>
                                    <div class="col-sm-6">
                                            <a href="#" class="btn btn-success edit-btn" data-item-id="@item.ItemId" onclick="openEditModal(@item.ItemId)">
                                            <i class="material-icons" data-toggle="tooltip" title="Add"></i> <span>Add to Menu</span>
							            </a>						
					                </div>
									</td>
								</tr>
							}
						}
					</tbody>
				
			</table>
		</div>
	</div>        
</div>

<!-- Edit Modal HTML -->
<div id="edit-modal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Add Item to Menu</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                            <p>Item ID: <span id="modal-item-id" name="itemId"></span></p>
                            <p>Item Name: <span id="modal-item-name" name="itemName"></span></p>
                            <p>Item Quantity: <span id="modal-item-quantity" name="itemQuantity"></span></p>
                     </div>
                </div>
                 <form id="add-to-menu-form" asp-action="AddToMenu" asp-controller="Rider" method="post">
                                <div class="form-group">
                                    <label for="quantity" class="col-form-label">Quantity:</label>
                                    <input type="number" id="quantity" name="quantity" class="form-control" min="1" max="@ViewBag.maxQuantity" required>
                                </div>
                                <div class="form-group">
                                    <input type="hidden" id="itemId" name="itemId">
                                </div>

                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" onclick="closeEditModal()">
                     <input type="submit" id="add-menuItem" class="btn btn-primary" value="Add to Menu">
                </div>
            </form>
        </div>
    </div>
</div>




@*<div id="edit-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
     
        <p>Item ID: <span id="modal-item-id" name="itemId"></span></p>
        <p>Item Name: <span id="modal-item-name" name="itemName"></span></p>
        <p>Item Quantity: <span id="modal-item-quantity" name="itemQuantity"></span></p>

        <form id="add-to-menu-form" asp-action="AddToMenu" asp-controller="Rider" method="post">
            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" name="quantity" min="1" max= @ViewBag.maxQuantity required ><br>
            <input type="hidden" id="itemId" name="itemId">
            <input type="submit" id="add-menuItem" value="Add to Menu">
        </form>
    </div>
</div>
*@


<!-- Modal -->
<div id="edit-form-container"></div>
<h5>Your Menu: M-@ViewBag.menuId</h5>

    <div class="container-xl">
        <div class="table-responsive">
            <div class="table-wrapper">
                <div class="table-title">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>Menu</h2>
                        </div>
                        </div></div>
                        <table id="menu-table">

            <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Item Quantity</th>
                                <th>Actions</th>
                            </tr>
                        </thead>


                        <tbody id="menu-table-body">

                            @if (menuItems != null)
                            {
                                @foreach (var item in menuItems)
                                {
                                    <tr>
                                        <td>@item.ItemId</td>
                                        <td>
                                            <span class="item-quantity">@item.Quantity</span>
                                        </td>
                                        <td>
                                            <a href="#" class="IncreaseDecreaseMenuItem " data-item-id="@item.ItemId" onclick="openEditMenuModal()">
                                                <i class="material-icons custom-edit-btn" data-toggle="tooltip" title="Update">&#xE254;</i>
                                        </a>
                                            <a href="#" class="delete-btn " onclick="deleteItem('@item.ItemId', '@item.Quantity')" data-item-id="@item.ItemId" data-toggle="modal">
                                                <i class="material-icons custom-delete-btn" data-toggle="tooltip" title="Delete">&#xE872;</i>
                                        </a>
                                        </td>
                                        @*<td><button class="IncreaseDecreaseMenuItem" data-item-id="@item.ItemId">Update</button></td>
                                        <td><button class="delete-btn" onclick="deleteItem('@item.ItemId', '@item.Quantity')" data-item-id="@item.ItemId">Delete</button></td>*@
                                    </tr>
                                }
                            }
                        </tbody>
            </table>
                    <a href="/Rider/HomePage" class="btn btn-secondary">
                        <i class="material-icons">arrow_back</i> Back
                    </a>

            </div>
        </div>
    </div>
@*
<div id="edit-menu-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>Item ID: <span id="modal-itemid" name="itemId"></span></p>
        <p>Item Name: <span id="modal-itemname" name="itemName"></span></p>
        <p>Inventory Item Quantity: <span id="modal-itemquantity" name="itemQuantity"></span></p>
        <p>Menu Item Quantity: <span id="modal-menu-itemquantity" name="menuItemQuantity"></span></p>

        <form id="update-menu" asp-action="UpdateMenuItemQuantity" asp-controller="Rider" method="post">
            <label for="quantity">Quantity:</label>
            <div class="quantity-input">
                <button type="button" class="quantity-btn minus-btn" >-</button>
      @*                <span id="modal-menu-quantity" name="menuItemQuantity"></span>*@
             <!--  <span type="number" id="modal-menu-quantity" name="menuItemQuantity"></span>
                <button type="button" class="quantity-btn plus-btn">+</button>
            </div>
            <input type="hidden" id="itemId" name="itemId">
            <input type="submit" id="update-MenuInventory" value="Update">
        </form>
    </div>
</div>--> 



    <div  id="edit-menu-modal" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">

            <div class="modal-header">
                <h4 class="modal-title">Edit Item</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <p>Item ID: <span id="modal-itemid" name="itemId"></span></p>
                    <p>Item Name: <span id="modal-itemname" name="itemName"></span></p>
                    <p>Item Quantity: <span id="modal-itemquantity" name="itemQuantity"></span></p>
                    <p>Menu Item Quantity: <span id="modal-menu-itemquantity" name="menuItemQuantity"></span></p>
                </div>
            </div>
          @*  <p>Item ID: <span id="modal-itemid" name="itemId"></span></p>
            <p>Item Name: <span id="modal-itemname" name="itemName"></span></p>
            <p>Inventory Item Quantity: <span id="modal-itemquantity" name="itemQuantity"></span></p>
            <p>Menu Item Quantity: <span id="modal-menu-itemquantity" name="menuItemQuantity"></span></p>

          *@  
          <form id="update-menu" asp-action="UpdateMenuItemQuantity" asp-controller="Rider" method="post">
                <label for="quantity">Quantity:</label>
                @*<div class="form-group">
                    <label for="quantity" class="col-form-label">Quantity:</label>
                    <input type="number" id="quantity" name="quantity" class="form-control" min="1" max="@ViewBag.maxQuantity" required>
                </div>*@
                    <div class="form-group quantity-input">
                        
                        <a style="text-decoration:none;" href="#" class="minus-btn">
                            <i class="material-icons bi bi-dash" data-toggle="tooltip" title="Remove">remove</i>
                        </a>
                        <span type="number" id="modal-menu-quantity" name="menuItemQuantity"></span>

                        <a href="#" class="plus-btn">
                            <i class="material-icons bi bi-plus" data-toggle="tooltip" title="Add">add</i>
                        </a>
                    </div>
                    <div class="form-group">
                    <input type="hidden" id="itemId" name="itemId">
                </div>

                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" onclick="closeUpdateModal()">
                    <input type="submit" id="update-MenuInventory" class="btn btn-primary" value="Update">
                </div>
            </form>
        </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/rider/Menu.js"></script>



<script>

    function openEditMenuModal() 
    {
        console.log("here");
        $('#edit-menu-modal').modal('show');
    }
    function openEditModal() {
        $('#edit-modal').modal('show');
    }

    function openEditModal(id) {
        $('#edit-modal').modal('show');
       /** var itemId = $(this).data('item-id');
        var itemQuantityOfMenu = $(this).closest("tr").find("td:nth-child(2)").text();
        console.log("itemNAme"+ itemName)**/
        // Update modal content with item details
        var itemId = $(this).data('item-id');

        var itemName = $(".edit-btn[data-item-id='" + itemId + "']").closest("tr").find("td:nth-child(2)").text();
        var itemQuantity = $(".edit-btn[data-item-id='" + itemId + "']").closest("tr").find("td:nth-child(4)").text();
        var itemQuantityOfMenu = $(this).closest("tr").find("td:nth-child(2)").text();
        console.log("itemNAme" + itemName) 

        $("#modal-item-id").text(itemId);
        $("#modal-item-name").text(itemName);
        $("#modal-item-quantity").text(itemQuantity);
    //    $("#modal-menu-itemquantity").text(itemQuantityOfMenu);
      //  $("#modal-menu-quantity").text(itemQuantityOfMenu);
    }
    function closeEditModal() {
            // Clear the form inputs
            $('#edit-description').val('');
            $('#edit-quantity').val('');
            $('#edit-price').val('');

            // Hide the modal
            $('#edit-modal').modal('hide');
            }
    function closeUpdateModal()
    {
        $('#edit-menu-modal').modal('hide');
    }
</script>
            

